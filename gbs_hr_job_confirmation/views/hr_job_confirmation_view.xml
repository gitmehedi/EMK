<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>
        <record id="view_hr_job_confirmation_tree" model="ir.ui.view">
			<field name="name">hr_job_confirmation_tree</field>
			<field name="model">hr.job.confirmation</field>
			<field name="arch" type="xml">
				<tree string="HR Job Confirmation" create="false">
					<field name="employee_id" />
					<field name="emp_department" />
					<field name="emp_designation" />
					<field name="state" />
				</tree>
			</field>
		</record>
        <record id="hr_performance_job_confirmation_form" model="ir.ui.view">
			<field name="name">hr_job_confirmation_form</field>
			<field name="model">hr.job.confirmation</field>
			<field name="type">form</field>
			<field name="arch" type="xml" >
                <form string="HR Job Confirmation" create="false" edit="false">
                    <header>
                        <field name="check_access" invisible="1"/>
                        <button string="Judgement" name="action_judge_incharge" attrs="{'invisible':['|',('check_access','=',False),('state','not in',['supervisor'])]}"
								type="object" class="oe_highlight"
								groups="base.group_user"/>
                        <button string="Judgement" name="action_judge_hod" attrs="{'invisible':['|',('check_access','=',False),('state','not in',['hod_approve'])]}"
								type="object" class="oe_highlight"
								groups="gbs_application_group.group_dept_manager"/>
                        <button string="HR Feedback" name="action_hr_manager_comment"
								states="hr_approve" type="object" class="oe_highlight"
								groups="hr.group_hr_manager"/>
                        <button string="Chief Officer Feedback" name="action_cxo_comment"
								states="cxo_approve" type="object" class="oe_highlight"
								groups="gbs_application_group.group_cxo"/>
                        <button string="Supervisor Feedback" name="action_supervisor_comment" type="object" class="oe_highlight"
                                attrs="{'invisible':['|',('check_access','=',False),('state','not in',['supervisor'])]}"
								groups="base.group_user"/>
                        <button string="HOD Feedback" name="action_hod_comment"
								attrs="{'invisible':['|',('check_access','=',False),('state','not in',['hod_approve'])]}" type="object" class="oe_highlight"
								groups="gbs_application_group.group_dept_manager"/>
                        <button string="GM Feedback" name="action_plant_incharge_comment"
								states="gm_approve" type="object" class="oe_highlight"
								groups="gbs_application_group.group_general_manager,gbs_application_group.group_head_of_plant"/>
                        <!--stages button-->
                        <button string="Confirm" name="action_confirm"
								states="draft" type="object" class="oe_highlight"
								groups="hr.group_hr_user,base.group_user"/>
                        <button string="Approve" name="action_supervisor_approve" type="object" class="oe_highlight"
                                attrs="{'invisible':['|',('check_access','=',False),('state','not in',['supervisor'])]}"
								groups="hr.group_hr_user,base.group_user"/>
                        <button string="Approve" name="action_hod_approve" attrs="{'invisible':['|',('check_access','=',False),('state','not in',['hod_approve'])]}"
								type="object" class="oe_highlight"
								groups="gbs_application_group.group_dept_manager"/>
                        <button string="Approve" name="action_gm_approve"
								states="gm_approve" type="object" class="oe_highlight"
								groups="gbs_application_group.group_general_manager,gbs_application_group.group_head_of_plant"/>
                        <button string="Approve" name="action_hr_approve"
								states="hr_approve" type="object" class="oe_highlight"
								groups="hr.group_hr_manager"/>
                        <button string="Approve" name="action_cxo_approve"
								states="cxo_approve" type="object" class="oe_highlight"
								groups="gbs_application_group.group_cxo"/>
                        <button string="Decline" name="action_decline"
								type="object" states="supervisor,hod_approve,gm_approve,hr_approve,cxo_approve"
								groups="gbs_application_group.group_head_of_plant,gbs_application_group.group_general_manager,
								hr.group_hr_manager,gbs_application_group.group_cxo"/>
                        <button string="Reset To Draft" name="action_reset"
								type="object" states="supervisor,hod_approve,gm_approve,hr_approve,cxo_approve,declined"
								groups="gbs_application_group.group_head_of_plant,gbs_application_group.group_general_manager,
								hr.group_hr_manager,gbs_application_group.group_cxo"/>

						<field name="state" widget="statusbar" statusbar_visible="draft,hod_approve,hr_approve,cxo_approve,approved"/>

					</header>
                    <sheet>
                        <group>
                            <group>
                                <separator string="Personal Information" colspan="2"/>
                                <field name="employee_id" readonly="1"/>
                                <field name="emp_department" readonly="1"/>
                                <field name="probation_period" readonly="1"/>
                            </group>
                            <group>
                                <separator string="Job History" colspan="2"/>
                                <field name="joining_date" readonly="1"/>
                                <field name="emp_designation" readonly="1"/>
                                <field name="joining_designation" readonly="1"/>

                            </group>
                        </group>
                        <!--management view part-->
                        <div>
                            <group colspan="4">
                                <separator string="Job Confirmation Criteria" colspan="4"/>
                                <newline/>
                                <field name="criteria_line_ids" nolabel="1">
                                    <tree string="Job Confirmation Criteria Line" editable="bottom">
                                        <field name="seq" readonly="1"/>
                                        <field name="name" readonly="1"/>
                                        <field name="marks" readonly="1" sum="Total"/>
                                        <field name="obtain_marks" sum="Total"/>
                                    </tree>
                                </field>
                            </group>
                            <div colspan="1">
                                <separator string="Comment by Job Confirming Person"/>
                                <field name="supervisor_comment" attrs="{'invisible':[('state','!=','supervisor')]}"/>
                                <field name="hod_comment" attrs="{'invisible':[('state','!=','hod_approve')]}"/>
                                <field name="plant_incharge_comment" attrs="{'invisible':[('state','!=','gm_approve')]}"/>
                                <field name="hr_manager_comment" attrs="{'invisible':[('state','!=','hr_approve')]}"/>
                                <field name="cxo_comment" attrs="{'invisible':[('state','!=','cxo_approve')]}"/>
                            </div>
                        </div>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>
        <record id="action_hr_job_confirmation" model="ir.actions.act_window">
			<field name="name">HR Job Confirmation</field>
			<field name="res_model">hr.job.confirmation</field>
			<field name="view_mode">tree,form</field>
		</record>

        <menuitem
				name="HR Job Confirmation"
                parent="hr_job_confirmation_main_menu"
				id="hr_job_confirmation_menu"
				sequence="20"
                action="action_hr_job_confirmation"
        />
    </data>
</odoo>