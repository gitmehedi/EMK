<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- Tree View -->
		<record id="sale_price_change_tree" model="ir.ui.view">
			<field name="name">sale_price_change_tree_view</field>
			<field name="model">sale.price.change</field>
			<field name="arch" type="xml">
				<tree string="Change Products Sale Price">
                    <field name="product_id"/>
                    <field name="list_price"/>
                    <!--<field name="uom_po_id"/>-->
                    <field name="new_price"/>
                    <field name="requested_by"/>
                    <field name="request_date"/>
                    <field name="approver1_id"/>
                    <field name="approver1_date"/>
                    <field name="approver2_id"/>
                    <field name="approver2_date"/>
					<field name="state"/>
				</tree>
			</field>
		</record>

		<!-- Form View -->
		<record id="sale_price_change_form_view" model="ir.ui.view">
			<field name="name">sale_price_change_form_view</field>
			<field name="model">sale.price.change</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Change Products Sale Price">
					<header>
						<button string="Confirm" name="action_confirm" groups="gbs_application_group.group_head_sale" states="draft" type="object" class="oe_highlight"/>
                    	<button string="Approve" name="action_approve" groups="gbs_application_group.group_derector" states="validate1" type="object" class="oe_highlight"/>
                    	<button string="Validate" name="action_validate" groups="gbs_application_group.group_head_account" states="confirm" type="object" class="oe_highlight"/>
                    	<button string="Refuse" name="action_refuse" groups="gbs_application_group.group_head_account,gbs_application_group.group_derector" states="confirm,validate1" type="object"/>
                    	<field name="state" widget="statusbar" statusbar_visible="draft,confirm,validate1,validate"/>
               	 	</header>

					<sheet>
						<group>
							<group>
                                <field name="product_id" options="{'no_create_edit': True}" attrs="{'readonly': [('state','in',('validate','validate1'))]}"/>
                                <field name="list_price" />
                                <!--<field name="uom_po_id"/>-->
                                <field name="new_price" attrs="{'readonly': [('state','in',('validate','validate1'))]}"/>
							</group>
							<group>
                                <field name="request_date"/>
                                <field name="requested_by"/>
                                <field name="approver1_id" attrs="{'invisible':['|', ('state','=','draft'),('state','=','confirm')]}"/>
                                <field name="approver1_date" attrs="{'invisible':['|', ('state','=','draft'),('state','=','confirm')]}"/>
                                <field name="approver2_id" attrs="{'invisible': [('state','in',('draft','confirm','validate1'))]}"/>
                                <field name="approver2_date" attrs="{'invisible': [('state','in',('draft','confirm','validate1'))]}"/>
							</group>
						</group>
	                </sheet>

					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
	                    <field name="message_ids" widget="mail_thread"/>
	                </div>

				</form>
			</field>
		</record>

		<record id="action_product_sale_price_change" model="ir.actions.act_window">
			<field name="name">Change Sales Price</field>
			<field name="res_model">sale.price.change</field>
			<field name="view_mode">tree,form</field>
		</record>

        <menuitem id="product_sale_price_change_menu_action" name="Change Product Price"
				  groups="gbs_application_group.group_head_sale,gbs_application_group.group_head_account,gbs_application_group.group_derector"
				  parent="sale.menu_product_template_action" sequence="9" action="action_product_sale_price_change"/>

    </data>
</odoo>