<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_jar_summ_analysis" model="ir.ui.view">
            <field name="name">jar.summary.analytic.report.pivot</field>
            <field name="model">jar.summary.analytic.report</field>
            <field name="arch" type="xml">
                <pivot string="Jar Summary Analysis" disable_linking="True">
                    <!--<field name="categ_id" type="row"/>-->
                    <field name="jar_received" type="col"/>
                    <!--<field name="price_total" type="measure"/>-->
                </pivot>
            </field>
        </record>

        <record id="view_account_invoice_report_graph" model="ir.ui.view">
            <field name="name">jar.summary.analytic.report.graph</field>
            <field name="model">jar.summary.analytic.report</field>
            <field name="arch" type="xml">
                <graph string="Jar Summary Analysis">
                   <field name="partner_id"/>
                    <field name="total_jar_taken"/>
                </graph>
            </field>
        </record>

        <!-- Custom reports (aka filters) -->
        <record id="filter_invoice_salespersons" model="ir.filters">
            <field name="name">By Salespersons</field>
            <field name="model_id">jar.summary.analytic.report</field>
            <field name="domain">[]</field>
            <field name="user_id" eval="False"/>
            <!--<field name="context">{'group_by': ['date:month', 'user_id']}</field>-->
        </record>


        <record id="view_account_invoice_report_search" model="ir.ui.view">
            <field name="name">jar.summary.analytic.search</field>
            <field name="model">jar.summary.analytic.report</field>
            <field name="arch" type="xml">
                <search string="Jar Summary Analysis">

                    <!--<filter string="To Invoice" domain="[('state','=','draft')]" help="Draft Invoices"/>-->
                    <!--<filter string="Pro-forma" domain="['|', ('state','=','proforma'),('state','=','proforma2')]"/>-->
                    <!--<filter string="Invoiced" name="current"-->
                            <!--domain="[('state','not in', ('draft','cancel','proforma','proforma2'))]"/>-->
                    <!--<separator/>-->
                    <!--<filter string="Customer" name="customer"-->
                            <!--domain="['|', ('type','=','out_invoice'),('type','=','out_refund')]"/>-->
                    <!--<filter string="Vendor" name="supplier"-->
                            <!--domain="['|', ('type','=','in_invoice'),('type','=','in_refund')]"/>-->
                    <!--<separator/>-->
                    <!--<filter string="Invoice" domain="['|', ('type','=','out_invoice'),('type','=','in_invoice')]"/>-->
                    <!--<filter string="Refund" domain="['|', ('type','=','out_refund'),('type','=','in_refund')]"/>-->

                    <field name="partner_id"/>
                    <field name="total_jar_taken"/>
                    <field name="jar_received"/>
                    <field name="uom_id"/>
                    <field name="jar_received_date"/>
                    <field name="due_jar"/>


                    <group expand="1" string="Group By">
                        <filter string="Partner" name="partner_id"
                                context="{'group_by':'partner_id','residual_visible':True}"/>
                        <!--<filter string="Salesperson" name='user' context="{'group_by':'user_id'}"/>-->
                        <!--<filter string="Product Category" name="category_product"-->
                                <!--context="{'group_by':'categ_id','residual_invisible':True}"/>-->
                        <!--<filter string="Status" context="{'group_by':'state'}"/>-->
                        <!--<filter string="Company" context="{'group_by':'company_id'}" groups="base.group_multi_company"/>-->
                        <!--<separator orientation="vertical"/>-->
                        <filter string="jar_received_date" context="{'group_by':'jar_received_date'}"/>
                        <filter string="Due Month" context="{'group_by':'date_due:month'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_account_invoice_report_all_supp" model="ir.actions.act_window">
            <field name="name">jar.summary.analytic.reporta</field>
            <field name="res_model">jar.summary.analytic.report</field>
            <field name="view_type">form</field>
            <field name="view_mode">pivot,graph</field>
            <field name="context">{'search_default_current':1, 'search_default_supplier':1,
                'group_by':['partner_id'], 'search_default_year': 1}
            </field>
            <field name="search_view_id" ref="view_account_invoice_report_search"/>
            <field name="help">From this report, you can have an overview of the amount invoiced from your vendors. The
                search tool can also be used to personalise your Invoices reports and so, match this analysis to your
                needs.
            </field>
        </record>


        <record id="action_jar_summary_analysis" model="ir.actions.act_window">
            <field name="name">jar.summary.analytic.report aa</field>
            <field name="res_model">jar.summary.analytic.report</field>
            <field name="view_type">form</field>
            <field name="view_mode">pivot,graph</field>
            <field name="context">{'search_default_current':1, 'search_default_customer':1,
                'group_by':['partner_id'], 'search_default_year': 1}
            </field>
            <field name="search_view_id" ref="view_account_invoice_report_search"/>
            <field name="help">From this report, you can have an overview of the amount invoiced to your customers. The
                search tool can also be used to personalise your Invoices reports and so, match this analysis to your
                needs.
            </field>
        </record>

        <menuitem name="Jar Summary Analysis"
                  action="action_jar_summary_analysis"
                  id="menu_jar_summary_report" parent="uom_jar_summary_menu" sequence="20"/>

        <act_window
                id="act_account_invoice_partner_relation"
                name="Jar Summary Analysis"
                res_model="uom.jar.summary"
                src_model="uom.jar.summary"
                view_mode="graph"/>

    </data>
</odoo>
