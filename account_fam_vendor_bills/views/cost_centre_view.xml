<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="inherited_account_analytic_account_form" model="ir.ui.view">
        <field name="name">analytic.analytic.account.form</field>
        <field name="model">account.analytic.account</field>
        <field name="inherit_id" ref="analytic.view_account_analytic_account_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form" position="replace">
                <form string="Analytic Account" edit="0" duplicate="0">
                    <header>
                        <button name="act_approve" string="Approve" type="object" states="draft" class="oe_highlight"
                                groups="account_fam_access.group_fam_sys_admin,account.group_account_manager"/>
                        <button name="act_reject" string="Reject" type="object" states="draft"
                                groups="account_fam_access.group_fam_sys_admin,account.group_account_manager"/>
                        <button name="%(action_account_analytic_account_wizard)d" string="Edit" type="action"
                                class="oe_highlight"
                                groups="account_fam_access.group_fam_sys_admin,account.group_account_manager"
                                attrs="{'invisible':['|',('state','in',('draft','reject')),('pending','=', True)]}"/>
                        <button name="act_approve_pending" string="Approve" type="object" class="oe_highlight"
                                groups="account_fam_access.group_fam_sys_admin,account.group_account_manager"
                                attrs="{'invisible':['|',('state','in',('draft','reject')),('pending','=', False)]}"/>
                        <button name="act_reject_pending" string="Reject" type="object"
                                groups="account_fam_access.group_fam_sys_admin,account.group_account_manager"
                                attrs="{'invisible':['|',('state','in',('draft','reject')),('pending','=', False)]}"/>
                        <button name="act_draft" string="Set to Draft" type="object" states="reject"
                                groups="account_fam_access.group_fam_sys_admin,account.group_account_manager"/>
                        <field name="state" widget="statusbar" invisible="True"/>
                    </header>
                    <sheet string="Analytic Account">
                        <div class="oe_button_box" name="button_box">
                            <button class="oe_stat_button" type="object" name="toggle_active" icon="fa-archive"
                                    invisible="1">
                                <field name="active" widget="boolean_button"
                                       options='{"terminology": "archive"}'/>
                            </button>
                            <button class="oe_stat_button" type="action"
                                    name="%(analytic.account_analytic_line_action)d"
                                    icon="fa-usd" string="Cost/Revenue" widget="statinfo" invisible="1"/>
                        </div>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only"/>
                            <h1>
                                <field name="name" class="oe_inline" placeholder="e.g. Cost Centre"/>
                            </h1>

                        </div>
                        <div name="project"/>
                        <group name="main">
                            <group>
                                <field name="code"/>
                                <field name="partner_id" invisible="True"/>
                                <field name="pending" invisible="True"/>
                            </group>
                            <group>
                                <field name="operating_unit_ids" widget="many2many_tags"/>
                                <field name="tag_ids" widget="many2many_tags"/>
                                <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"
                                       invisible="True"/>
                                <field name="currency_id" options="{'no_create': True}"
                                       groups="base.group_multi_currency"
                                       invisible="True"/>
                            </group>
                        </group>
                        <field name="line_ids" attrs="{'invisible':[('line_ids','=',[])]}">
                            <tree decoration-info="state=='pending'" decoration-success="state=='approve'"
                                  decoration-bf="state in ('pending',)"
                                  decoration-danger="state=='reject'">
                                <field name="change_name"/>
                                <field name="request_date"/>
                                <field name="change_date"/>
                                <field name="status"/>
                                <field name="state"/>
                            </tree>
                        </field>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </xpath>
        </field>
    </record>

    <record id="inherited_account_analytic_account_tree" model="ir.ui.view">
        <field name="name">analytic.analytic.account.tree</field>
        <field name="model">account.analytic.account</field>
        <field name="inherit_id" ref="analytic.view_account_analytic_account_list"/>
        <field name="arch" type="xml">
            <xpath expr="//tree" position="replace">
                <tree string="Analytic Accounts" decoration-info="state=='draft'" decoration-success="state=='approve'"
                      decoration-danger="state=='reject'"
                      decoration-bf="state in ('approve',)">
                    <field name="display_name"/>
                    <field name="code"/>
                    <field name="partner_id" invisible="1"/>
                    <field name="active" invisible="1"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                    <field name="debit" invisible="1"/>
                    <field name="credit" invisible="1"/>
                    <field name="balance" invisible="1"/>
                    <field name="state"/>
                </tree>
            </xpath>
        </field>
    </record>

    <record id="inherited_account_analytic_account_search" model="ir.ui.view">
        <field name="name">analytic.analytic.account.search</field>
        <field name="model">account.analytic.account</field>
        <field name="inherit_id" ref="analytic.view_account_analytic_account_search"/>
        <field name="arch" type="xml">
            <xpath expr="//search" position="replace">
                <search string="Analytic Account">
                    <field name="name" filter_domain="['|', ('name','ilike',self), ('code','ilike',self)]"
                           string="Analytic Account"/>
                    <field name="tag_ids"/>
                    <field name="partner_id"/>
                    <group string="Group By">
                        <filter string="Pending" name="pending" icon="terp-personal"
                                domain="[('state','in',('draft','approve')),('pending','=',1),'|',('active','=',0),('active','=',1)]"/>
                        <filter string="Rejected" name="state" icon="terp-personal"
                                domain="[('active','=',0),('pending','=',0),('state','=','reject')]"/>
                        <filter string="In-Active" name="state" icon="terp-personal"
                                domain="[('active','=',0),('pending','=',0),('state','=','approve')]"/>
                    </group>
                </search>
            </xpath>
        </field>
    </record>

    <record id="analytic.action_analytic_account_form" model="ir.actions.act_window">
        <field name="context">
            {"search_default_active":'False',"search_default_pending":'True'}
        </field>
    </record>

    <record id="analytic.action_analytic_account_form" model="ir.actions.act_window">
        <field name="name">Cost Centres</field>
        <field name="sequence">20</field>
        <field name="parent_id" eval="ref('account.account_account_menu')"/>
    </record>

    <!--    <record id="account.menu_account_supplier" model="ir.actions.act_window">-->
    <!--        <field name="name">Cost Centres</field>-->
    <!--        <field name="sequence">20</field>-->
    <!--        <field name="parent_id" eval="ref('account_fam_menu.sub_configuration_menu')"/>-->
    <!--    </record>-->

    <record id="analytic.account_analytic_tag_action" model="ir.actions.act_window">
        <field name="name">Cost Centre Tags</field>
        <field name="action" eval="False"/>
    </record>

    <record id="analytic.account_analytic_line_action_entries" model="ir.actions.act_window">
        <field name="name">Cost Centres Entries</field>
        <field name="action" eval="False"/>
    </record>

    <record id="account.menu_action_analytic_account_tree2" model="ir.ui.menu">
        <field name="name">Cost Centres</field>
        <field name="sequence">30</field>
        <field name="parent_id" eval="ref('account_fam_menu.sub_configuration_menu')"/>
    </record>

    <menuitem id="fixed_asset_vendors" name="Vendors" sequence="10"
              parent="account_fam_menu.sub_configuration_menu" groups=""/>

    <record id="account.menu_action_analytic_lines_tree" model="ir.ui.menu">
        <field name="name">Cost Centres Entries</field>
        <field name="action" eval="False"/>
    </record>

    <record id="account.account_analytic_tag_menu" model="ir.ui.menu">
        <field name="name">Cost Centres Tags</field>
    </record>
    <record id="account.account_analytic_def_account" model="ir.ui.menu">
        <field name="name">Cost Centres Tags</field>
    </record>

    <record id="view_account_analytic_line_form_inherit_account_cost" model="ir.ui.view">
        <field name="name">account.analytic.line.form.inherit.account</field>
        <field name="model">account.analytic.line</field>
        <field name="inherit_id" ref="analytic.view_account_analytic_line_form"/>
        <field name="arch" type="xml">
            <data>
                <xpath expr="//field[@name='account_id']" position="attributes">
                    <attribute name="options">{'no_create':True,'no_create_edit':True,'no_open':True}</attribute>
                    <attribute name="string">Cost Centre</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
            </data>
        </field>
    </record>
</odoo>