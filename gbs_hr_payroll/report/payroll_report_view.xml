<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="report_payrolladvice2" inherit_id="l10n_in_hr_payroll.report_payrolladvice">
            <xpath expr="//div/table/tr/td/p[@class='text-center'][1]" position="replace">
                <p class="text-center">
                    <strong>Payment Advice from <span t-esc="o.name"/> A/C no. <span t-field="o.bank_acc_id" /> form period  <span t-esc="get_month(o.date)['from_name']"/> to <span t-esc="get_month(o.date)['to_name']"/></strong>
                </p>
            </xpath>
            <xpath expr="//t[@t-call='report.html_container']" position="replace">
                <t>
                    <t t-foreach="docs" t-as="o">
                        <div class="page">
                            <table>
                                <tr>
                                    <td><p><span t-esc="time.strftime('%m-%d-%Y')"/></p></td>
                                </tr>
                                <tr>
                                    <td><strong><span>To,</span></strong></td>
                                </tr>
                                <tr>
                                    <td><strong><span>The Manager,</span></strong></td>
                                </tr>
                                <tr>
                                    <td><strong><span t-esc="o.bank_id.name" />Bank</strong></td>
                                </tr>
                                <!--<br/>-->
                                <!--<tr>-->
                                    <!--<p><b><u>Subject: Disbursement of <span t-esc="o.name"/> to the following employees Bank Account.</u></b></p>-->
                                <!--</tr>-->
                                <br/>
                                <br/>
                                <tr>
                                    <td><p><span>Dear Sir/Madam,</span></p></td>
                                </tr>
                                <tr>
                                    <td>
                                        <p class="text-center">
                                            <strong>Payment Advice from <span t-esc="o.name"/> A/C no. <span t-esc="o.company_id.partner_id.bank_ids and o.company_id.partner_id.bank_ids[0].acc_number"/> form period  <span t-esc="get_month(o.date)['from_name']"/> to <span t-esc="get_month(o.date)['to_name']"/></strong>
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td><p><span t-esc="o.note" /></p></td>
                                </tr>
                            </table>

                            <table class="table table-condensed">
                                <thead>
                                    <tr style="border-top: 1px solid black">
                                        <th>SI No.</th>
                                        <th>Name Of Employee</th>
                                        <th>Bank Account No.</th>
                                        <th t-if="o.neft != True">IFSC Code</th>
                                        <th>By salary</th>
                                        <th>C/D</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="get_detail(o.line_ids)" t-as="l">
                                        <td>
                                            <span t-esc="l_index+1">.</span>
                                        </td>
                                        <td>
                                          <span t-esc="l['name']"/>
                                        </td>
                                        <td>
                                             <span t-esc="l['acc_no']"/>
                                        </td>
                                        <td t-if="o.neft != True">
                                            <span t-esc="l['ifsc_code']"/>
                                        </td>
                                        <td>
                                            <span t-esc="l['bysal']" t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/>
                                        </td>
                                         <td>
                                            <span t-esc="l['debit_credit']"/>
                                        </td>
                                    </tr>
                                    <tr class="border-black" style="border-bottom: 1px solid black">
                                        <td colspan="2"/>
                                        <td t-if="o.neft == True">
                                            <strong >Total :</strong>
                                        </td>
                                        <td t-if="o.neft != True" colspan="2">
                                            <strong >Total :</strong>
                                        </td>
                                        <td colspan="2">
                                            <strong><span t-esc="get_bysal_total()" t-options="{'widget': 'monetary', 'display_currency': o.company_id.currency_id}"/></strong>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <p>Yours Sincerely</p>
                            <p>For <span t-esc="o.company_id.name"/></p>
                            <p class="mt32">Authorized Signature</p>
                        </div>
                    </t>
                </t>
            </xpath>
        </template>
        <template id="report_individual_payslip">
            <t t-call="report.html_container">
                <t t-call="custom_report.gbs_internal_layout">
                    <div class="page" style="page-break-inside:auto">
                        <div class="row">
                            <div class="clearfix">
                                <h3 class="report-title">Monthly Salary Sheet</h3>
                                <h4>
                                    <label>Description</label>
                                    :
                                    <span t-esc="data['name']"/>
                                </h4>
                            </div>


                            <table class="table table-bordered table-report-xs table-striped" style="margin-bottom: 10px;">
                                <thead>
                                    <tr class="odo-bg-gray">
                                        <th>SN</th>
                                        <th>Employee</th>
                                        <th>Designation</th>
                                        <th style="min-width:90px">D.O.J</th>
                                        <th style="min-width:90px">Loan Balance</th>
                                        <t t-foreach="rules" t-as="r">
                                            <th>
                                                <span t-esc="r['name']"></span>
                                            </th>
                                        </t>
                                    </tr>
                                </thead>
                                <tbody>

                                    <t t-foreach="docs" t-as="k">
                                        <t t-if="k['val']">
                                            <td class="odo-bg-info" t-att-colspan="docs_len" style="padding-left:15px">
                                                <strong t-esc="k['name']"></strong>
                                            </td>

                                            <t t-foreach="k['val']" t-as="o">
                                                <tr>
                                                    <td>
                                                        <span t-esc="o['sn']"></span>
                                                    </td>
                                                    <td>
                                                        <span class="text-nowrap" t-esc="o['emp_name']"></span>
                                                    </td>
                                                    <td>
                                                        <span class="text-nowrap" t-esc="o['designation']"></span>
                                                    </td>
                                                    <td>
                                                        <span t-esc="o['doj']"></span>
                                                    </td>
                                                    <td>
                                                        <span t-esc="o['loan_balance']"></span>
                                                    </td>
                                                    <t t-foreach="rules" t-as="r">
                                                        <td class="text-right">
                                                            <span t-esc="'%.2f'% o[r['code']]"></span>
                                                        </td>
                                                    </t>
                                                </tr>
                                            </t>
                                        </t>
                                    </t>

                                    <tr>
                                        <td t-att-colspan="docs_len">
                                            <h4 class="text-right pr-5"><strong> Total: <span t-esc="total_sum"></span> </strong></h4>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <p class="text-right">In Words: <strong t-esc="amt_to_word"></strong></p>
                        </div>
                        <t t-call="custom_report.report_signing"></t>
                    </div>
                </t>
            </t>
        </template>
        <report
        	id="report_individual_paslips"
            string="Payslip Summary"
            model="hr.payslip.run"
            report_type="qweb-pdf"
            file="gbs_hr_payroll.report_individual_payslip"
            name="gbs_hr_payroll.report_individual_payslip"
        />
        <record id="report_individual_paslips" model="ir.actions.report.xml">
            <field name="paperformat_id" ref="custom_report.paperformat_backend_landscape"/>
        </record>
    </data>
</odoo>