<?xml version="1.0"?>
<odoo>
    <data>
        <record id="inherited_view_tax_form" model="ir.ui.view">
            <field name="name">inherited.account.tax.view</field>
            <field name="model">account.tax</field>
            <field name="inherit_id" ref="account.view_tax_form"/>
            <field name="priority" eval="30"/>
            <field name="arch" type="xml">
                <xpath expr="//form" position="replace">
                    <form string="Account Tax">
                        <header>
                            <button name="action_confirm" type="object"
                                    string="Confirm" states="draft"
                                    class="oe_highlight"/>
                            <field name="state" widget="statusbar"/>
                        </header>
                        <sheet>
                            <group>
                                <group>
                                    <field name="name" string="Vat Name" attrs="{'readonly': [('state', '=', 'confirm')]}"/>
                                </group>
                                <group>
                                    <field name="type_tax_use" string="Vat Scope" attrs="{'readonly': [('state', '=', 'confirm')]}"/>
                                </group>
                            </group>
                            <notebook>
                                <page string="Definition">
                                    <group>
                                        <group>
                                            <field name="amount_type" string="Vat Computation" attrs="{'readonly': [('state', '=', 'confirm')]}"/>
                                            <label for="amount" attrs="{'invisible':[('amount_type','not in', ('fixed', 'percent', 'division'))]}"/>
                                            <div attrs="{'invisible':[('amount_type','not in', ('fixed', 'percent', 'division'))]}">
                                                <field name="amount" class="oe_inline" attrs="{'readonly': [('state', '=', 'confirm')]}"/>
                                                <label string="%" class="oe_inline" attrs="{'invisible':[('amount_type','=','fixed')]}" />
                                            </div>
                                            <label for="mushok_amount"
                                                   attrs="{'invisible':[('amount_type','not in', ('fixed', 'percent'))]}"/>
                                            <div attrs="{'invisible':[('amount_type','not in', ('fixed', 'percent'))]}">
                                                <field name="mushok_amount" class="oe_inline"/>
                                                <label string="%" class="oe_inline"
                                                       attrs="{'invisible':[('amount_type','=','fixed')]}"/>
                                            </div>
                                            <label for="vds_amount"
                                                   attrs="{'invisible':[('amount_type','not in', ('fixed', 'percent'))]}"/>
                                            <div attrs="{'invisible':[('amount_type','not in', ('fixed', 'percent'))]}">
                                                <field name="vds_amount" class="oe_inline"/>
                                                <label string="%" class="oe_inline"
                                                       attrs="{'invisible':[('amount_type','=','fixed')]}"/>
                                            </div>
                                        </group>
                                        <group attrs="{'invisible':[('amount_type','=', 'group')]}">
                                            <field name="account_id" string="Vat Account" attrs="{'readonly': [('state', '=', 'confirm')]}"/>
                                            <field name="refund_account_id" string="Vat Account on Refunds" attrs="{'readonly': [('state', '=', 'confirm')]}"/>
                                        </group>
                                    </group>
                                    <field name="children_tax_ids"
                                        attrs="{'invisible':['|', ('amount_type','!=','group'), ('type_tax_use','=','none')], 'readonly': [('state', '=', 'confirm')]}"
                                        domain="[('type_tax_use','in',('none',type_tax_use)), ('amount_type','!=','group')]">
                                        <tree string="Children Taxes">
                                            <field name="sequence" widget="handle" />
                                            <field name="name"/>
                                            <field name="amount_type" />
                                            <field name="amount" />
                                        </tree>
                                    </field>
                                </page>
                                <page string="Advanced Options">
                                    <group>
                                        <group>
                                            <field name="description" attrs="{'invisible':[('amount_type','=', 'group')], 'readonly': [('state', '=', 'confirm')]}"/>
                                            <field name="tax_group_id" string="Vat Group" attrs="{'readonly': [('state', '=', 'confirm')]}"/>
                                            <field name="tag_ids" domain="[('applicability', '!=', 'accounts')]" widget="many2many_tags" context="{'default_applicability': 'taxes'}"
                                                   attrs="{'readonly': [('state', '=', 'confirm')]}"/>
                                            <field name="analytic" attrs="{'invisible':[('amount_type','=', 'group')], 'readonly': [('state', '=', 'confirm')]}" groups="analytic.group_analytic_accounting" />
                                            <field name="company_id" options="{'no_create': True}" attrs="{'readonly': [('state', '=', 'confirm')]}" groups="base.group_multi_company"/>
                                            <field name="active" attrs="{'readonly': [('state', '=', 'confirm')]}" groups="base.group_no_one"/>
                                        </group>
                                        <group name="advanced_booleans">
                                            <field name="price_include" attrs="{'invisible':[('amount_type','=', 'group')], 'readonly': [('state', '=', 'confirm')]}" />
                                            <field name="include_base_amount" attrs="{'invisible':[('amount_type','=', 'group')], 'readonly': [('state', '=', 'confirm')]}" string="Affect Base of Subsequent Vats"/>
                                            <field name="tax_adjustment" string="Vat adjustment" attrs="{'readonly': [('state', '=', 'confirm')]}"/>
                                        </group>
                                    </group>
                                </page>
                            </notebook>
                        </sheet>
                    </form>
                </xpath>
            </field>
        </record>
        <record id="inherited_view_tax_tree" model="ir.ui.view">
            <field name="name">account.tax.tree</field>
            <field name="model">account.tax</field>
            <field name="inherit_id" ref="account.view_tax_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//tree" position="replace">
                    <tree string="Account Vat">
                        <field name="sequence" widget="handle"/>
                        <field name="name" string="Vat Name"/>
                        <field name="type_tax_use" string="Vat Scope"/>
                        <field name="description" string="Short Name"/>
                        <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company"/>
                    </tree>
                </xpath>
            </field>
        </record>
        <record id="account.action_tax_form" model="ir.actions.act_window">
            <field name="name">Vats</field>
            <field name="res_model">account.tax</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain" eval="False"/> <!-- Force empty -->
            <field name="context">{'search_default_sale': True, 'search_default_purchase': True}</field>
            <field name="view_id" ref="inherited_view_tax_tree"/>
        </record>
        <!--<menuitem action="account.action_tax_form" id="account.menu_action_tax_form" name="Vats" parent="account.account_account_menu" sequence="1"/>-->

        <record id="inherited_invoice_supplier_form" model="ir.ui.view">
            <field name="name">account.invoice.from</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.invoice_supplier_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='invoice_line_tax_ids']" position="attributes">
                    <attribute name="string">Vats</attribute>
                </xpath>
                <xpath expr="//field[@name='tax_line_ids']/tree/field[@name='name']" position="attributes">
                    <attribute name="string">Narration</attribute>
                </xpath>
                <xpath expr="//field[@name='tax_line_ids']/tree/field[@name='account_id']" position="attributes">
                    <attribute name="string">Account</attribute>
                </xpath>
                <xpath expr="//field[@name='amount_untaxed']" position="attributes">
                    <attribute name="string">Without Vat Amount</attribute>
                </xpath>
                <xpath expr="//field[@name='amount_tax']" position="attributes">
                    <attribute name="string">Vat</attribute>
                </xpath>
            </field>
        </record>
    </data>
</odoo>