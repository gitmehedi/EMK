<?xml version="1.0" encoding="utf-8" ?>
<openerp>
	<data>

        <!-- Tree View-->
		<record id="hr_internal_approval_tree" model="ir.ui.view">
			<field name="name">hr.candidate.approval.tree</field>
			<field name="model">hr.candidate.approval</field>
			<field name="arch" type="xml">
				<tree string="Internal Approval">
                   <field name="candidate_name"/>
                   <field name="address"/>
                   <field name="education"/>
                   <field name="experience"/>
                   <field name="department"/>
                   <field name="proposal_designation"/>
                   <field name="expected_salary"/>
                   <field name="joining_date"/>
				</tree>
			</field>
		</record>

		<!-- Form View-->
		<record id="hr_internal_approval_form" model="ir.ui.view">
			<field name="name">hr.candidate.approval.form</field>
			<field name="model">hr.candidate.approval</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Internal Approval">
					<header>
                        <button string="Confirm" name="action_confirm"
								states="draft" type="object" class="oe_highlight"
								groups="hr_recruitment.group_hr_recruitment_manager"
								/>

						<button string="Recommend" name="action_gm_approve"
								states="gm_approve" type="object" class="oe_highlight"
								groups="gbs_application_group.group_general_manager"
								/>

						<button string="Approve" name="action_cxo_approve"
								states="cxo_approve" type="object" class="oe_highlight"
								groups="gbs_application_group.group_cxo"
								/>

                     	<button string="Decline" name="action_decline"
								type="object" attrs="{'invisible':[('check_edit_access','=',False)]}"
								groups="hr_recruitment.group_hr_recruitment_manager,gbs_application_group.group_general_manager,gbs_application_group.group_cxo"
								/>

						<button string="Reset To Draft" name="action_reset"
								type="object" states="gm_approve,cxo_approve"
								groups="hr_recruitment.group_hr_recruitment_manager,gbs_application_group.group_general_manager,gbs_application_group.group_cxo"
								/>

						<field name="state" widget="statusbar" statusbar_visible="draft,gm_approve,cxo_approve,approved"/>

					</header>
					<sheet>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only"/>
                            <h1>
                                <field name="candidate_name" placeholder="Candidate's Name" attrs="{'readonly':[('state','!=','draft')]}"/>
                            </h1>
                        </div>
						<group>
							<group>
								<field name="address" attrs="{'readonly':[('state','!=','draft'),('check_edit_access','=',False)]}"/>
								<field name="education" attrs="{'readonly':[('state','!=','draft'),('check_edit_access','=',False)]}"/>
								<field name="experience" attrs="{'readonly':[('state','!=','draft'),('check_edit_access','=',False)]}"/>
							</group>

							<group>
								<field name="department" attrs="{'readonly':[('state','!=','draft'),('check_edit_access','=',False)]}"/>
								<field name="proposal_designation" attrs="{'readonly':[('state','!=','draft'),('check_edit_access','=',False)]}"/>
                                <field name="expected_salary" attrs="{'readonly':[('state','!=','draft'),('check_edit_access','=',False)]}"/>
								<field name="joining_date" attrs="{'readonly':[('state','!=','draft'),('check_edit_access','=',False)]}"/>
								<field name="check_edit_access" invisible="1"/>
							</group>
							<field name="remarks" nolabel="1" placeholder="Remarks" colspan="4" attrs="{'readonly':[('check_edit_access','=',False)]}"/>
						</group>
					</sheet>

					<div class="oe_chatter">
						<field name="message_follower_ids" widget="mail_followers"/>
	                    <field name="message_ids" widget="mail_thread"/>
	                </div>

				</form>
			</field>
		</record>

        <record id="action_hr_internal_approval" model="ir.actions.act_window">
			<field name="name">Internal Approval</field>
			<field name="res_model">hr.candidate.approval</field>
			<field name="view_mode">tree,form</field>
		</record>

        <menuitem name="Internal Approval" parent="hr_recruitment.menu_hr_recruitment_root" id="main_menu_hr_internal_approval"
				  sequence="81"
				  groups="hr_recruitment.group_hr_recruitment_manager,gbs_application_group.group_general_manager,gbs_application_group.group_cxo"/>

		<menuitem name="Internal Approval" parent="main_menu_hr_internal_approval" id="menu_hr_internal_approval"
				  groups="hr_recruitment.group_hr_recruitment_manager,gbs_application_group.group_general_manager,gbs_application_group.group_cxo"/>

	</data>
</openerp>