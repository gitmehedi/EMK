<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record id="inherited_view_holiday_simple" model="ir.ui.view">
			<field name="name">inherited_view_holiday_simple</field>
			<field name="model">hr.holidays</field>
			<field name="inherit_id" ref="hr_holidays.view_holiday_simple" />
			<field name="arch" type="xml">
				<xpath expr="//tree/field[@name='holiday_status_id']" position="after">
                    <field name="leave_year_id"/>
                </xpath>
			</field>
		</record>
        <record id="inherited_edit_holiday_new" model="ir.ui.view">
			<field name="name">inherited_edit_holiday_new</field>
			<field name="model">hr.holidays</field>
			<field name="inherit_id" ref="hr_holidays.edit_holiday_new" />
			<field name="arch" type="xml">
				<xpath expr="//form/sheet/group/group/field[@name='holiday_status_id']" position="after">
                    <field name="leave_year_id" attrs="{'invisible': [('type', '=', 'remove')]}" options="{'no_quick_create':True,'no_create_edit':True,'no_open': True}"/>
                </xpath>
			</field>
		</record>
        <record id="inherited_view_hr_holidays_filter" model="ir.ui.view">
			<field name="name">inherited_view_hr_holidays_filter</field>
			<field name="model">hr.holidays</field>
			<field name="inherit_id" ref="hr_holidays.view_hr_holidays_filter" />
			<field name="arch" type="xml">
				<xpath expr="//filter[@name='year']" position="replace">
                    <filter name="year" string="Current Year" domain="[('leave_year_id.state','=','draft')]"/>
                    <field name="leave_year_id" string="Year" filter_domain="[('leave_year_id', 'ilike', self)]"/>
                </xpath>
			</field>
		</record>

		<record id="hr_holidays.open_company_allocation" model="ir.actions.act_window">
            <field name="name">Leaves Summary</field>
            <field name="res_model">hr.holidays</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" eval="inherited_view_holiday_simple"/>
            <field name="context">{
                'search_default_year': 1,
                'search_default_group_type': 1,
                'search_default_my_leaves': 1,
                'needaction_menu_ref':
                [
                    'hr_holidays.menu_open_ask_holidays_new',
                    'hr_holidays.menu_open_allocation_holidays',
                    'hr_holidays.menu_request_approve_allocation',
                    'hr_holidays.menu_open_employee_leave',
                ]
            }</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click here to create a new leave request.
                </p>
            </field>
            <field name="domain">[('holiday_type','=','employee')]</field>
            <field name="search_view_id" ref="hr_holidays.view_hr_holidays_filter"/>
        </record>

        <record id="hr_holidays.open_ask_holidays" model="ir.actions.act_window">
            <field name="name">Leaves Request</field>
            <field name="res_model">hr.holidays</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="hr_holidays.edit_holiday_new"/>
            <field name="context">{
                'search_default_year': 1,
                'default_type': 'remove',
                'search_default_my_leaves': 1,
                'needaction_menu_ref':
                [
                    'hr_holidays.menu_open_company_allocation',
                ]
            }</field>
            <field name="domain">[('type','=','remove')]</field>
            <field name="search_view_id" ref="hr_holidays.view_hr_holidays_filter"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a new leave request.
              </p><p>
                Once you have recorded your leave request, it will be sent
                to a manager for validation. Be sure to set the right leave
                type (recuperation, legal holidays, sickness) and the exact
                number of open days related to your leave.
              </p>
            </field>
        </record>

        <record id="hr_holidays.open_allocation_holidays" model="ir.actions.act_window">
            <field name="name">Allocation Request</field>
            <field name="res_model">hr.holidays</field>
            <field name="view_type">form</field>
            <field name="context">{
                'search_default_year': 1,
                'default_type':'add',
                'search_default_my_leaves': 1,
                'needaction_menu_ref':
                [
                    'hr_holidays.menu_open_company_allocation',
                ]
            }</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click here to create a new leave allocation request.
                </p>
            </field>
            <field name="domain">[('type','=','add')]</field>
            <field name="view_id" ref="hr_holidays.edit_holiday_new"/>
            <field name="search_view_id" ref="hr_holidays.view_hr_holidays_filter"/>
        </record>

        <record id="hr_holidays.open_department_holidays_approve" model="ir.actions.act_window">
            <field name="name">Department Leaves</field>
            <field name="res_model">hr.holidays</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="context">{
                'search_default_year': 1,
                'search_default_department':1,
                'search_default_approve':1,}
            </field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click here to create a new leave request.
                </p>
            </field>
            <field name="domain">[('type','=','remove')]</field>
            <field name="search_view_id" ref="hr_holidays.view_hr_holidays_filter"/>
        </record>

        <record id="hr_holidays.open_department_holidays_allocation_approve" model="ir.actions.act_window">
            <field name="name">Department Leaves Allocation</field>
            <field name="res_model">hr.holidays</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="context">{'search_default_year': 1,'default_type':'add', 'search_default_department':1, 'search_default_approve':1}</field>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click here to create a new leave allocation.
                </p>
            </field>
            <field name="domain">[('type','=','add')]</field>
            <field name="search_view_id" ref="hr_holidays.view_hr_holidays_filter"/>
        </record>

        <record id="hr_holidays.request_approve_allocation" model="ir.actions.act_window">
            <field name="name">Allocation Request</field>
            <field name="res_model">hr.holidays</field>
            <field name="view_type">form</field>
            <field name="context">{
                'search_default_year': 1,
                'default_type': 'add',
                'search_default_approve':1,
                'needaction_menu_ref':
                [
                    'hr_holidays.menu_open_allocation_holidays',
                    'hr_holidays.menu_open_company_allocation'
                ]
            }</field>
            <field name="domain">[('type','=','add')]</field>
            <field name="view_id" ref="hr_holidays.edit_holiday_new"/>
            <field name="search_view_id" ref="hr_holidays.view_hr_holidays_filter"/>
        </record>
	</data>
</odoo> 
