<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <record id="hr_employee_loan_request_form" model="ir.ui.view">
			<field name="name">hr.employee.loan.request.form</field>
			<field name="model">hr.employee.loan.request</field>
			<field name="type">form</field>
			<field name="priority" eval="16"/>
			<field name="arch" type="xml">
				<form string="Employee Loan Requests">
					<header>
						 <button name="action_draft" type="object"
                                string="Reject"
                                states="applied,approved"/>
                        <button name="action_confirm" type="object"
                                string="Apply" states="draft"
                                class="oe_highlight"/>
                        <button name="action_done" type="object"
                                string="Approve" states="applied"
                                class="oe_highlight"/>
                        <field name="state" widget="statusbar"/>
					</header>
					<sheet>
						<div class="oe_title">
                            <label for="employee_id" class="oe_edit_only"/>
                            <h1>
                                <field name="employee_id" placeholder="Employee's Name"/>
                            </h1>
                        </div>
					<group>
						<group>							
							<field name="loan_type_id" />
						</group>
						<group>
							<field eval="time.strftime('%Y-%m-26')" name="applied_date_id"/>
       						<field eval="time.strftime('%Y-%m-28')" name="approved_date_id"/>
       						<field eval="time.strftime('%Y-%m-26')" name="disbursement_date_id" />
       						<field name="department_id" invisible="1"/>
							<field name="company_id" readonly="1" groups="base.group_multi_company"/>
							<field name="user_id" invisible="1"/>	
						</group>
					</group>
					<notebook position="inside">
							<page string="General">
								<group >
									<group>
										<field name="principal_amount"/>
                                   		<field name="duration"/>
									</group>
									<group>
										<field name="is_interest_payble" />
										<field name="interst_mode_id" attrs="{'invisible': [('is_interest_payble', '=', False)]}" />                                   
	                                    <field name="Req_rate" attrs="{'invisible': [('is_interest_payble', '=', False)]}" />
                                    </group>
                                </group>	
							</page>
							<page string="Proofs">
								<field name="employee_loan_proofs_ids">	
										<field name="name"/>
										<field name="mandatory"/>
								</field>
							</page>
							<page string="Policies">
                                <field name="employee_loan_policies_ids">
                                    <field name="name"/>
                                </field>
							</page>
							<page string="Notes">
								<field name="notes" />			
							</page>
					</notebook>
					</sheet>
				</form>
			</field>
		</record>
		<record id="hr_employee_loan_request_tree" model="ir.ui.view">
			<field name="name">hr.employee.loan.request.tree</field>
			<field name="model">hr.employee.loan.request</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Employee Loan Requests">
					<field name="name" />
					<field name="employee_id" />
					<field name="loan_type_id" />
					<field name="company_id" readonly="1" groups="base.group_multi_company"/>
					<field name="state" />
				</tree>
			</field>
		</record>
		
		<!-- Sequence Records -->
		<record id="seq_loan_request" model="ir.sequence">
            <field name="name">Loan Sequence</field>
            <field name="code">emp_code</field>
            <field name="prefix">EMPC/</field>
            <field name="padding">10</field>
        </record>
        
		
        <record model="ir.actions.act_window" id="hr_employee_loan_request_action">
            <field name="name">Loan Requests</field>
            <field name="res_model">hr.employee.loan.request</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="loan_request_menu" name="Loan Requests" parent="loans_menu" sequence="3"
                  action="hr_employee_loan_request_action"/>   
    </data>
</odoo>