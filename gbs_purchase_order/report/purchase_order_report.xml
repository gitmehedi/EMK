<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <data>
        <!--inherit purchase order and menu hide -->
        <report
            string="Purchase Order"
            id="purchase.action_report_purchase_order"
            model="purchase.order"
            report_type="qweb-pdf"
            name="purchase.report_purchaseorder"
            file="purchase.report_purchaseorder"
            menu="False"
        />
        <report
                id="action_report_po"
                model="purchase.order"
                string="Purchase Order"
                report_type="qweb-pdf"
                name="gbs_purchase_order.report_purchase_order"
                file="gbs_purchase_order.report_purchase_order"
                menu = "True"
                paperformat="report_layout.paperformat_po"
        />

        <template id="report_purchase_order">
            <t t-call="report.html_container">
                <t t-call="report_layout.gbs_po_layout">
                    <div class="page" style="page-break-inside: auto">
                        <style>
                            .signed-by { display: inline-block; border-top: 1px solid #333; padding: 5px; margin-top: 60px; }
                        </style>
                        <div class="clearfix">
                            <div class="row">
                                <div class="col-xs-4">
                                    <p class="mb-5">Form # PUR FRM 06</p>
                                </div>
                                <div class="col-xs-4 text-center">
                                    <p class="mb-5">Revision # 00</p>
                                </div>
                                <div class="col-xs-4 text-right">
                                    <p class="mb-5"> Date of Issue: 01-01-2018</p>
                                </div>
                            </div>
                            <br/>
                            <h3 class="text-center mt-0">Purchase Order</h3>
                            <div class="row">
                                <div class="col-xs-6">
                                    <p class="mb-5"><b>Order No : </b><span t-esc="data['name']"/></p>
                                </div>
                                <div class="col-xs-6 text-right">
                                    <p class="mb-5"><b>PO Date : </b><span t-esc="order_date"/></p>
                                </div>
                            </div>

                            <hr class="hr-xs mt-0"/>

                            <div class="row">
                                <div class="col-xs-6">
                                    <t t-if="data['region_type'] == 'foreign'">
                                        <p><b>Supplier : </b><span t-esc="data['partner_id']"/></p>
                                    </t>
                                    <t t-elif="data['region_type'] == 'local'">
                                        <p><b>Order To : </b><span t-esc="data['partner_id']"/></p>
                                    </t>
                                    <t t-elif="data['region_type'] != 'local' or data['region_type'] == 'foreign'">
                                        <p><b>Supplier / Order To : </b><span t-esc="data['partner_id']"/></p>
                                    </t>
                                    <p>
                                        <b>Address: </b>
                                        <span t-esc="data['cus_address']"/>
                                    </p>
                                    <p><b>VAT / BIN : </b>
                                        <t t-if="data['partner_bin_no']">
                                            <span t-esc="data['partner_bin_no']"/>
                                        </t>
                                        <t t-else="">
                                            <span t-esc="data['partner_vat_no']"/>
                                        </t>
                                    </p>
                                    <p><b>TIN : </b><span t-esc="data['partner_tin_no']"/></p>
                                    <p><b>Contact Person : </b>
                                        <span t-esc="data['sup_con']"/></p>
                                    <p><b>Ref No : </b><span t-esc="data['partner_ref']"/></p>
                                    <p><b>Date : </b><span t-esc="data['requisition_date']"></span></p>
                                </div>
                                <div class="col-xs-6 text-left">
                                    <t t-if="data['region_type'] == 'foreign'">
                                        <p><b>Consignee : </b><span t-esc="data['company']"/></p>
                                    </t>
                                    <t t-elif="data['region_type'] == 'local'">
                                        <p><b>Bill To : </b><span t-esc="data['company']"/></p>
                                    </t>
                                    <t t-elif="data['region_type'] != 'local' or data['region_type'] == 'foreign'">
                                        <p><b>Consignee / Bill To : </b><span t-esc="data['company']"/></p>
                                    </t>
                                    <p>
                                        <b>Address: </b>
                                        <span t-esc="data['company_address']"/>
                                    </p>
                                    <p><b>VAT / BIN : </b>
                                        <t t-if="data['company_bin_no']">
                                            <span t-esc="data['company_bin_no']"/>
                                        </t>
                                        <t t-else="">
                                            <span t-esc="data['company_vat_no']"/>
                                        </t>
                                    </p>
                                    <p><b>TIN : </b><span t-esc="data['company_tin_no']"/></p>
                                    <p>
                                        <b>Contact Person : </b>
                                        <span t-esc="data['contact_person']"/>
                                    </p>
                                </div>
                            </div>
                            <hr class="hr-xs"/>
                        </div>
                        <div class="clearfix">
                            <p class="text-sm">
                                We are pleased to issue the purchase order
                                for supplying under mentioned Materials to <span t-esc="data['company']"/>
                                as the management accepts your price and quality, on the basis
                                of following terms and conditions:
                            </p>
                            <table class="table table-report table-bordered table-striped">
                                <thead>
                                    <tr class="odo-bg-gray">
                                        <th class="text-center">Sl#</th>
                                        <th class="text-center">Description/Specification/Origin</th>
                                        <th class="text-center">Quantity</th>
                                        <th class="text-center">Unit</th>
                                        <th class="text-center">Unit Rate</th>
                                        <th class="text-center">Total Price</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="lists" t-as="l">
                                        <tr style="page-break-inside: avoid">
                                            <td><span t-esc="l_index+1"/></td>
                                            <td><span t-esc="l['product_id']"/></td>
                                            <td class="text-right"><span t-esc="l['product_qty']"/></td>
                                            <td class="text-right"><span t-esc="l['product_uom']"/></td>
                                            <td class="text-right"><span t-esc="l['price_unit']"/></td>
                                            <td class="text-right"><span t-esc="l['price_subtotal_price']"/></td>
                                        </tr>
                                    </t>
                                    <tr>
                                        <td colspan="4" rowspan="5"><strong>Amount in words : </strong><span t-esc="amt_to_word"/> Only</td>
                                        <td><strong>Sub Total</strong></td><td class="text-right"><span t-esc="total_amount" /></td>
                                    </tr>
                                     <t t-if="data['amount_tax']">
                                        <tr>
                                            <td><strong>VAT</strong></td><td class="text-right"><span t-esc="data['amount_tax']" /></td>
                                        </tr>

                                         <tr>
                                            <td><strong>After VAT</strong></td><td class="text-right"><span t-esc="data['amount_after_tax']" /></td>
                                        </tr>
                                    </t>

                                    <t t-if="data['amount_discount']">
                                        <tr>
                                            <td><strong>Write-off</strong></td><td class="text-right"><span t-esc="data['amount_discount']"/></td>
                                        </tr>
                                    </t>

                                    <tr>
                                        <td><strong>Grand Total</strong></td><td class="text-right"><strong t-esc="data['amount_total']" /></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <t t-if="data['terms_condition']">
                                    <b>Specific Terms and Conditions :</b>
                                    <p t-raw="data['terms_condition']"/>
                                </t>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 text-left">
                                <span class="signed-by"><b>Ordered by :</b></span>
                            </div>
                            <div class="col-xs-6 text-right">
                                <span class="signed-by"><b>Approved by :</b></span>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </template>
    </data>
</odoo>