<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <data>
        <!--inherit purchase order and menu hide -->
        <report
            string="Purchase Order"
            id="purchase.action_report_purchase_order"
            model="purchase.order"
            report_type="qweb-pdf"
            name="purchase.report_purchaseorder"
            file="purchase.report_purchaseorder"
            menu="False"
        />
        <report
                id="action_report_po"
                model="purchase.order"
                string="Purchase Order"
                report_type="qweb-pdf"
                name="gbs_purchase_order.report_purchase_order"
                file="gbs_purchase_order.report_purchase_order"
                menu = "True"
                paperformat="report_layout.paperformat_backend_portrait"
        />

        <template id="report_purchase_order">
            <t t-call="report.html_container">
                <t t-call="report_layout.gbs_internal_layout">
                    <div class="page" style="page-break-inside: auto">
                        <style>
                            .signed-by { display: inline-block; border-top: 1px solid #333; padding: 5px; margin-top: 60px; }
                        </style>
                        <div class="clearfix">
                            <div class="row">
                                <div class="col-xs-4">
                                    <p class="mb-5">Form # PUR FRM 06</p>
                                </div>
                                <div class="col-xs-4 text-center">
                                    <p class="mb-5">Revision # 00</p>
                                </div>
                                <div class="col-xs-4 text-right">
                                    <p class="mb-5"> Date of Issue: 01-01-2018</p>
                                </div>
                            </div>
                            <br/>
                            <h3 class="text-center mt-0">Purchase Order</h3>
                            <div class="row">
                                <div class="col-xs-6">
                                    <p class="mb-5"><b>Order No : </b><span t-esc="data['name']"/></p>
                                </div>
                                <div class="col-xs-6 text-right">
                                    <p class="mb-5"><b>PO Date : </b><span t-esc="order_date"/></p>
                                </div>
                            </div>

                            <hr class="hr-xs mt-0"/>

                            <div class="row">
                                <div class="col-xs-6">
                                    <t t-if="data['region_type'] == 'foreign'">
                                        <p><b>Suplier : </b><br/><span t-esc="data['partner_id']"/></p>
                                        <p><span t-esc="data['cus_address']" t-esc-options='{"widget": "contact", "fields": ["address"], "no_marker": true}'/> <br/>
                                            <b>Contract Parson : </b><span t-esc="data['sup_con']"/><br/>
                                            <b>Order Ref No : </b><span t-esc="data['partner_ref']"/><br/>
                                            <b>Date : </b><span t-esc="data['requisition_date']"></span> </p>
                                    </t>
                                    <t t-if="data['region_type'] == 'local'">
                                        <p><b>Order To : </b><br/><span t-esc="data['partner_id']"/></p>
                                        <p><span t-esc="data['cus_address']" t-esc-options='{"widget": "contact", "fields": ["address"], "no_marker": true}'/> <br/>
                                            <b>Contract Parson : </b><span t-esc="data['sup_con']"/><br/>
                                            <b>Order Ref No : </b><span t-esc="data['partner_ref']"/><br/>
                                            <b>Date : </b><span t-esc="data['requisition_date']"></span> </p>
                                    </t>
                                </div>
                                <div class="col-xs-6 text-left">
                                    <t t-if="data['region_type'] == 'foreign'">
                                        <p><b>Consignee : </b><br/><span t-esc="data['company']"/></p>
                                        <p><span t-esc="data['company_address']" t-esc-options='{"widget": "contact", "fields": ["address"], "no_marker": true}'/> <br/></p>
                                        <b>Contract Parson : </b>
                                        <t t-foreach="data['contact_person']" t-as="con_per">
                                            <td><span t-esc="con_per.name"/></td><br/>
                                        </t>
                                    </t>
                                    <t t-if="data['region_type'] == 'local'">
                                        <p><b>Bill To : </b><br/><span t-esc="data['company']"/></p>
                                        <p><span t-esc="data['company_address']" t-esc-options='{"widget": "contact", "fields": ["address"], "no_marker": true}'/> <br/></p>
                                        <b>Contract Parson : </b>
                                        <t t-foreach="data['contact_person']" t-as="con_per">
                                            <td><span t-esc="con_per.name"/></td><br/>
                                        </t>
                                    </t>
                                </div>
                            </div>
                            <hr class="hr-xs"/>
                        </div>
                        <div class="clearfix">
                            <p class="text-sm">
                                We are pleased to issue the purchase order
                                for supplying under mentioned Materials to <span t-esc="data['company']"/>
                                as the management accepts your price and quality, on the basis
                                of following terms and conditions:
                            </p>
                            <table class="table table-report table-bordered table-striped">
                                <thead>
                                    <tr class="odo-bg-gray">
                                        <th>Sl#</th>
                                        <th>Description/Specification/Origin</th>
                                        <th>Quantity</th>
                                        <th>Unit Rate</th>
                                        <th>Total Price</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-foreach="lists" t-as="l">
                                        <tr style="page-break-inside: avoid">
                                            <td><span t-esc="l_index+1"/></td>
                                            <td><span t-esc="l['product_id']"/></td>
                                            <td><span t-esc="l['product_qty']"/></td>
                                            <td><span t-esc="l['price_unit']"/></td>
                                            <td><span t-esc="l['price_subtotal']"/></td>
                                        </tr>
                                    </t>
                                    <tr>
                                        <td colspan="3" rowspan="5"><strong>Amount in words : </strong><span t-esc="amt_to_word"/></td>
                                        <td><strong>Sub Total</strong></td><td><span t-esc="total_amount" /></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Discount</strong> (<span t-esc="data['amount_discount']"/> %) </td><td><span t-esc="data['total_discount']"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>After Discount</strong></td><td><span t-esc="data['amount_after_discount']"/></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Vat</strong> (<span t-esc="data['amount_vat']" /> %) </td><td><span t-esc="data['total_vat']" /></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Grand Total</strong></td><td><span t-esc="data['amount_total']" /></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-xs-6">
                                <t t-if="data['terms_condition']">
                                    <b>Specific Terms and Conditions :</b>
                                    <p t-raw="data['terms_condition']"/>
                                </t>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 text-left">
                                <span class="signed-by"><b>Ordered by :</b></span>
                            </div>
                            <div class="col-xs-6 text-right">
                                <span class="signed-by"><b>Approved by :</b></span>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </template>
    </data>
</odoo>