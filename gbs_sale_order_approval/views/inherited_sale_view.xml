<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="customized_sale_order_form_view" model="ir.ui.view">
            <field name="name">customized_sale_order_form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <data>
                    <header>
                        <button name="action_submit"
                                groups="sales_team.group_sale_salesman_all_leads,sales_team.group_sale_salesman,gbs_application_group.group_head_sale,gbs_application_group.group_cxo"
                                states="draft"
                                type="object"
                                class="btn-primary"
                                string="Confirm"/>

                        <button name="action_validate"
                                groups="gbs_application_group.group_head_account,gbs_application_group.group_cxo"
                                attrs="{'invisible': [('double_validation','=',False)]}"
                                states="validate"
                                type="object"
                                class="btn-primary "
                                string="Validate" />

                        <button name="action_create_delivery_order"
                                states="sale"
                                type="object"

                                class="btn-primary"
                                string="Create Delivery Order"/>

                    </header>

                    <!-- Conform Sale 1 -->
                    <xpath expr="//button[@name='action_confirm' and @states='draft']" position="replace">
                         <button name="action_confirm"
                                 attrs="{'invisible':['|', ('double_validation','=',True),('state','in',('draft','validate','done','cancel','sale'))]}"
                                 string="Confirm Sale1"
                                 groups="gbs_application_group.group_head_sale,gbs_application_group.group_head_account"
                                 type="object"
                                 class="btn-primary o_sale_confirm" invisible="1"/>
                    </xpath>

                    <!--Approve Sale-->
                    <xpath expr="//button[@name='action_confirm' and @states='sent']" position="replace">
                        <button name="action_confirm" states="sent"
                                groups="gbs_application_group.group_head_sale,gbs_application_group.group_cxo"
                                string="Approve"
                                class="btn-primary o_sale_confirm"
                                type="object"/>
                    </xpath>

                    <xpath expr="//button[@name='action_quotation_send' and @states='draft']" position="replace">
                        <button name="action_quotation_send"
                                groups="gbs_application_group.group_head_sale,gbs_application_group.group_head_account,gbs_application_group.group_cxo"
                                string="Send by Email" type="object" states="draft,submit_quotation,validate" class="btn-primary"/>
                    </xpath>

                    <xpath expr="//button[@name='print_quotation' and @states='draft']" position="replace">
                           <button name="print_quotation"
                                groups="gbs_application_group.group_head_sale,gbs_application_group.group_head_account,gbs_application_group.group_cxo"
                                string="Print" type="object" states="draft,submit_quotation,validate" class="btn-primary"/>
                    </xpath>

                    <xpath expr="//button[@name='action_cancel']" position="replace">
                        <button name="action_cancel" states="draft,validate,sent,sale" type="object" string="Cancel"/>
                    </xpath>

                    <xpath expr="//button[@name='action_draft']" position="replace">
                        <button name="action_draft" states="cancel" type="object" string="Set to Quotation"/>
                    </xpath>

                    <xpath expr="//button[@name='action_done']" position="replace">
                        <button name="action_done" type="object" string="Lock" states="sale"
                        help="If the sale is locked, you can not modify it anymore. However, you will still be able to invoice or deliver."/>
                    </xpath>

                    <xpath expr="//field[@name='state']" position="replace">
                        <field name="state" widget="statusbar" statusbar_visible="draft,sent,sale"/>
                    </xpath>

                    <xpath expr="//group/group/field[@name='payment_term_id']" position="after">
                        <field name="credit_sales_or_lc" attrs="{'readonly':[('state','in',('sent','validate','done','cancel','sale'))]}"/>
                    </xpath>

                    <xpath expr="//group/group/field[@name='payment_term_id']" position="before">
                        <field name="double_validation" invisible="1"/>
                    </xpath>

                    <xpath expr="//group/group/field[@name='payment_term_id']" position="before">
                        <field name="pack_type" attrs="{'readonly':[('state','in',('sent','validate','done','cancel','sale'))]}"/>
                    </xpath>

                    <xpath expr="//group/group/field[@name='pack_type']" position="after">
                        <field name="currency_ids"/>
                    </xpath>

                     <xpath expr="//field[@name='payment_term_id']" position="replace">
                            <field name="payment_term_id" attrs="{'readonly':[('state','in',('sent','validate','done','cancel','sale'))]}" options="{'no_create': True}"/>
                    </xpath>

                    <xpath expr="//field[@name='partner_id']" position="replace">
                        <field name="partner_id" attrs="{'readonly':[('state','in',('sent','validate','done','cancel','sale'))]}" domain="[('customer','=',True)]" context="{'search_default_customer':1, 'show_address': 1}" options='{"always_reload": True}'/>
                    </xpath>
                    <xpath expr="//field[@name='date_order']" position="replace">
                        <field name="date_order" attrs="{'invisible': [('state', 'in', ['sale', 'done', 'cancel'])],'readonly':[('state','in',('sent','validate','done','cancel','sale'))]}"/>
                    </xpath>

                    <xpath expr="//field[@name='validity_date']" position="replace">
                        <field name="validity_date" attrs="{'invisible': [('state', 'in', ['sale', 'done'])],'readonly':[('state','in',('sent','validate','done','cancel','sale'))]}"/>
                    </xpath>

                    <xpath expr="//field[@name='pricelist_id']" position="replace">
                         <field name="pricelist_id" groups="product.group_sale_pricelist"
                                attrs="{'readonly':[('state','in',('sent','validate','done','cancel','sale'))]}"/>
                    </xpath>

                    <xpath expr="//field[@name='price_subtotal']" position="replace">
                        <field name="price_subtotal" attrs="{'readonly':[('state','in',('sent','validate','done','cancel','sale'))]}" widget="monetary" groups="sale.group_show_price_subtotal"/>
                    </xpath>

                </data>
            </field>
        </record>

    </data>
</odoo>