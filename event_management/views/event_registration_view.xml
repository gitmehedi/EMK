<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record model="ir.ui.view" id="inherited_view_event_registration_form">
            <field name="model">event.registration</field>
            <field name="inherit_id" ref="event.view_event_registration_form"/>
            <field name="arch" type="xml">
                <xpath expr="//form/header/button[@name='action_send_badge_email']" position="attributes">
                    <attribute name="groups">event_user.group_event_officer</attribute>
                </xpath>
                <xpath expr="//form/header/button[@name='confirm_registration']" position="attributes">
                    <attribute name="groups">event_user.group_event_officer</attribute>
                </xpath>
                <xpath expr="//form/header/button[@name='button_reg_close']" position="attributes">
                    <attribute name="groups">event_user.group_event_officer</attribute>
                </xpath>
                <xpath expr="//form/header/button[@name='do_draft']" position="attributes">
                    <attribute name="groups">event_user.group_event_officer</attribute>
                </xpath>
                <xpath expr="//form/header/button[@name='button_reg_cancel']" position="attributes">
                    <attribute name="groups">event_user.group_event_officer</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="invisible">True</attribute>
                    <attribute name="groups">event_user.group_event_officer</attribute>
                    <attribute name="options">{'no_open':True,'no_create':True,'no_create_edit':True}</attribute>
                </xpath>
                <xpath expr="//field[@name='name']" position="attributes">
                    <attribute name="required">True</attribute>
                    <attribute name="attrs">{'readonly' : [('state','=','done')]}</attribute>
                </xpath>
                <xpath expr="//field[@name='phone']" position="attributes">
                    <attribute name="required">True</attribute>
                    <attribute name="attrs">{'readonly' : [('state','=','done')]}</attribute>
                </xpath>
                <xpath expr="//field[@name='email']" position="attributes">
                    <attribute name="required">True</attribute>
                    <attribute name="attrs">{'readonly' : [('state','=','done')]}</attribute>
                </xpath>
                <xpath expr="//field[@name='event_id']" position="attributes">
                    <attribute name="options">{'no_open':True,'no_create':True,'no_create_edit':True}</attribute>
                </xpath>
                <xpath expr="//field[@name='email']" position="after">
                    <field name="date_of_birth" required="True" attrs="{'readonly' : [('state','=','done')]}"/>
                    <field name="gender" attrs="{'readonly' : [('state','=','done')]}" options="{'no_open':True,'no_create':True,'no_create_edit':True}"/>
                    <field name="profession_id" options="{'no_open':True,'no_create':True,'no_create_edit':True}"
                           attrs="{'readonly' : [('state','=','done')]}"/>
                    <field name="card_number" attrs="{'readonly' : [('state','=','done')]}"/>
                    <field name="event_fee" readonly="True" attrs="{'invisible' : [('state','!=','done')]}"/>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="inherited_view_event_registration_tree">
            <field name="model">event.registration</field>
            <field name="inherit_id" ref="event.view_event_registration_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//tree" position="replace">
                    <tree string="Registration" decoration-bf="state in ('draft','open')"
                          colors="orange:state=='draft';green:state=='open';salmon:state=='cancel';silver:state=='done';">
                        <field name="event_id"/>
                        <field name="create_date"/>
                        <field name="name"/>
                        <field name="phone"/>
                        <field name="email"/>
                        <field name="event_fee" sum="event_fee"/>
                        <field name="state"/>
                        <field name="message_needaction" invisible="1"/>
                        <button name="confirm_registration" string="Confirm Registration" states="draft" type="object"
                                icon="fa-check text-success"/>
                        <button name="button_reg_close" string="Attended the Event" states="open" type="object"
                                icon="fa-level-down text-success"/>
                        <button name="button_reg_cancel" string="Cancel Registration" states="draft,open" type="object"
                                icon="fa-times-circle text-danger"/>
                    </tree>
                </xpath>
            </field>
        </record>

        <record model="ir.ui.view" id="inherit_view_registration_search">
            <field name="model">event.registration</field>
            <field name="inherit_id" ref="event.view_registration_search"/>
            <field name="arch" type="xml">
                <xpath expr="//search" position="replace">
                    <search string="Event Registration">
                        <field name="id" string="Registration ID"/>
                        <field name="event_id" string="Registration ID"/>
                        <field name="name" string="Participant"
                               filter_domain="['|', '|', ('name', 'ilike', self), ('email', 'ilike', self), ('origin', 'ilike', self)]"/>
                        <separator/>
                        <field name="event_id"/>
                        <field name="partner_id" string="Organizer"/>
                        <group expand="0" string="Group By">
                            <filter string="Organizer" domain="[]" context="{'group_by':'partner_id'}"/>
                            <filter string="Event" name="group_event" domain="[]" context="{'group_by':'event_id'}"/>
                            <filter string="Status" domain="[]" context="{'group_by':'state'}"/>
                            <filter string="Registration Day" domain="[]" context="{'group_by': 'create_date:day'}"/>
                            <filter string="Registration Month" domain="[]"
                                    context="{'group_by': 'create_date:month'}"/>
                        </group>
                    </search>
                </xpath>
            </field>
        </record>


        <!--        <record model="ir.ui.view" id="inherit_event_registration_view_form_inherit_barcode">-->
        <!--            <field name="name">inherit.event.registration.view.form.inherit.barcode</field>-->
        <!--            <field name="inherit_id" ref="event_barcode.event_registration_view_form_inherit_barcode"/>-->
        <!--            <field name="model">event.registration</field>-->
        <!--            <field name="arch" type="xml">-->
        <!--                <xpath expr="//field[@name='barcode']" position="replace"></xpath>-->
        <!--                <xpath expr="//form/sheet/group" position="before">-->
        <!--                    <div class="oe_title">-->
        <!--                        <label for="barcode"/>-->
        <!--                        <h2>-->
        <!--                            <field name="barcode"/>-->
        <!--                        </h2>-->
        <!--                    </div>-->
        <!--                </xpath>-->
        <!--            </field>-->
        <!--        </record>-->


        <record model="ir.ui.view" id="view_attendee_profession_form">
            <field name="name">attendee.profession.form</field>
            <field name="model">attendee.profession</field>
            <field name="arch" type="xml">
                <form string="Attendee Profession" duplicate="0">
                    <header>
                        <button name="act_approve" string="Approve" states="draft" type="object" class="oe_highlight"/>
                        <button name="act_draft" string="Draft" states="reject" type="object" class="oe_highlight"/>
                        <button name="act_reject" string="Reject" states="draft" type="object"/>
                        <field name="state" widget="statusbar" statusbar_colors='{"cancel":"red"}'/>
                    </header>
                    <sheet>
                        <group>
                            <group>
                                <field name="name"/>
                            </group>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="view_attendee_profession_tree">
            <field name="name">attendee.profession.tree</field>
            <field name="model">attendee.profession</field>
            <field name="arch" type="xml">
               <tree string="Attendee Profession" decoration-info="state=='draft'" decoration-success="state=='approve'"
                      decoration-danger="state=='reject'"
                      decoration-bf="state in ('approve',)">
                    <field name="name"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="view_attendee_profession_search" model="ir.ui.view">
            <field name="name">view.attendee.profession.search</field>
            <field name="model">attendee.profession</field>
            <field name="arch" type="xml">
                <search>
                    <field name="name"/>
                    <field name="state"/>
                    <group string="Group By">
                        <filter string="Pending" name="pending" icon="terp-personal"
                                domain="[('state','in',('draft','approve')),('pending','=',1),'|',('active','=',0),('active','=',1)]"/>
                        <filter string="Rejected" name="state" icon="terp-personal"
                                domain="[('active','=',0),('pending','=',0),('state','=','reject')]"/>
                        <filter string="In-Active" name="state" icon="terp-personal"
                                domain="[('active','=',0),('pending','=',0),('state','=','approve')]"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_attendee_profession">
            <field name="name">Professions</field>
            <field name="res_model">attendee.profession</field>
            <field name="view_type">form</field>
            <field name="context">
                {"search_default_active":'False',"search_default_pending":'True'}
            </field>
        </record>

        <menuitem id="menu_attendee_profession" action="action_attendee_profession"
                  groups="event_user.group_event_officer" parent="event.menu_event_configuration"/>
    </data>
</odoo>
