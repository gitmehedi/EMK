<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>
        <record id="inherit_invoice_form" model="ir.ui.view">
            <field name="name">inherit.account.invoice.form</field>
            <field name="model">account.invoice</field>
            <field name="inherit_id" ref="account.invoice_form"/>
            <field name="arch" type="xml">
                <xpath expr="//div[@class='alert alert-info']" position="replace">
                    <field name="so_type" invisible="1"/>
                    <div class="alert alert-info" role="alert" style="margin-bottom:0px;"
                         attrs="{'invisible': ['|', ('has_outstanding','=',False), ('type','=','out_invoice'), ('so_type','=','lc_sales')]}">
                        You have <bold><a class="alert-link" href="#outstanding" role="button">outstanding payments</a></bold> for this customer. You can allocate them to mark this invoice as paid.
                    </div>
                </xpath>

                <xpath expr="//sheet/notebook/page[1]/group/field[@name='outstanding_credits_debits_widget']" position="replace">
                    <field name="outstanding_credits_debits_widget" colspan="2" nolabel="1" widget="payment"
                           attrs="{'invisible': ['|', ('state', 'not in', 'open'), ('type','=','out_invoice'), ('so_type','=','lc_sales')]}"/>
                </xpath>

            </field>
        </record>
    </data>
</odoo>