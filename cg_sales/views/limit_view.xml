<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
    
    	<!-- res.partner.limits Tree View  -->
    
	    <record model="ir.ui.view" id="res_partner_limits_view">
	        <field name="name">Partner limit</field>
	        <field name="model">res.partner.limits</field>
	        <field name="arch" type="xml">
	           <tree string="Partner limit">
	              <field name="partner_id"/>
	              <field name="value"/>
	           </tree>
	        </field>
	    </record>
	    
	    <!-- customer.creditlimit.assign View  -->
	
		<record id="customer_creditlimit_assign_tree" model="ir.ui.view">
            <field name="name">customer.creditlimit.assign.tree</field>
            <field name="model">customer.creditlimit.assign</field>
            <field name="arch" type="xml">
                <tree string="Credit Limit">
                    <field name="name"/>
                    <field name="credit_limit"/>
                    <field name="approve_date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        
        <record id="customer_creditlimit_assign_form" model="ir.ui.view">
            <field name="name">customer.creditlimit.assign.form</field>
            <field name="model">customer.creditlimit.assign</field>
            <field name="arch" type="xml">
                <form string="Credit Limit" version="7.0">
	                <header>
	                    <button name="approve_creditlimit_run" type="object" string="Approve" states="draft" class="oe_highlight"/>
	                    <button name="%(action_creditlimit_by_partner)d" type="action" states="draft" string="Generate Limit" class="oe_highlight"/>
	                    <button string="Set to Draft" name="draft_creditlimit_run" type="object" states="approve" />
	                    <field name="state" widget="statusbar"/>
	                </header>
	                <sheet>
	                    <label for="name" class="oe_edit_only" attrs="{'invisible':[('state','=','approve')]}"/>
	                    <h1>
	                        <field name="name"/>
	                    </h1>
	                    <group>
	                        <group>
	                            <field name="credit_limit"/>
	                        </group>
	                        <group>
	                            <field name="approve_date"/>
	                        </group>
	                    </group>
	                    <separator string="Customers"/>
	                    <field name="limit_ids"/>
	                </sheet>
                </form>
            </field>
        </record>
        
        <record id="action_creditlimit_tree" model="ir.actions.act_window">
            <field name="name">Customer Credit Limit</field>
            <field name="res_model">customer.creditlimit.assign</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="customer_creditlimit_assign_tree"/>
        </record>
        
        <menuitem action="action_creditlimit_tree" id="menu_action_creditlimit_tree" 
        			parent="base.menu_sales" sequence="34" groups="group_head_sale"/>

    </data>
</openerp>
