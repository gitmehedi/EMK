<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>
		<!-- Work Order Form Views -->
		<record model="ir.ui.view" id="buyer_work_order_form_view">
			<field name="name">sale.order.form</field>
			<field name="model">sale.order</field>
			<field name="arch" type="xml">
				<form string="Sales Order Form">
					<header>
						<button name="action_confirm" type="object" states="draft"
							string="Confirm" class="oe_highlight" />

						<field name="state" widget="statusbar" />
					</header>
					<sheet>
						<h1>
							<field name="name" string="Serial No" />
						</h1>
						<group>
							<group>
								<field name="bwo_ref_no"/>
								<field name="partner_id"
									options='{"no_open": True,"no_create": 1, "no_create_edit": 1}' />
								<field name="department_id" domain="[('buyer_ids', '=', partner_id)]"
									options='{"no_open": True,"no_create": 1, "no_create_edit": 1}' />
								<field name="style_id"
									options='{"no_open": True,"no_create": 1, "no_create_edit": 1}' />
								<field name="season_id"
									options='{"no_open": True,"no_create": 1, "no_create_edit": 1}' />
								<field name="year_id"
									options='{"no_open": True,"no_create": 1, "no_create_edit": 1}' />
								<field name="product_template_id" domain="[('finish_goods', '=', True)]"
									options='{"no_open": True,"no_create": 1, "no_create_edit": 1}' />
								<field name="shipment_mode" />
								<field name="hs_code" />
								<field name="epo_date" />
							</group>
							<group>


								<field name="currency_id"
									options='{"no_open": True,"no_create": 1, "no_create_edit": 1}' />

								<field name="delivery_term_id"
									options='{"no_open": True,"no_create": 1, "no_create_edit": 1}' />
								<field name="tolerance" />
								<field name="production_qty" />
								<field name="delay" />
								<field name="shipment_date" />
								<field name="buyer_inspection_date" />
								<field name="inhouse_inspection_date" />
							</group>
						</group>
						<notebook colspan="4">
							<page string="Products Details">
								<field name="order_line">
									<tree string="" editable="top">
										<field name="product_id"
											options='{"no_open": True,"no_create": 1, "no_create_edit": 1}'
											domain="[('product_tmpl_id', '=', parent.product_template_id)]" />
										<field name="name" invisible="1"/>
										<field name="qty" />
										<field name="product_uom"
											options='{"no_open": True,"no_create": 1, "no_create_edit": 1}' />
										<field name="rate" />
									</tree>
								</field>
							</page>
							<page string="Shipment Details">
								<field name="bwo_shipment_ids">
									<tree editable="top">
										<field name="name" />
										<field name="shipment_date" />
										<field name="buyer_inspection_date" />
										<field name="in_house_inspection_date" />
									</tree>
								</field>
							</page>
							<page string="Destination Details">
								<field name="bwo_destination_ids"
									options='{"no_open": True,"no_create": 1, "no_create_edit": 1}' />

							</page>
						</notebook>
						<separator string="Remarks" />
						<field name="remarks" placeholder="Put an remarks..................." />
					</sheet>
				</form>
			</field>
		</record>


		<!-- Work Order  Tree or List view -->
		<record id="buyer_work_order_tree_view" model="ir.ui.view">
			<field name="name">sale.order.tree</field>
			<field name="model">sale.order</field>
			<field name="arch" type="xml">
				<tree string="Sales Order Tree">
					<field name="name" />
					<field name="bwo_ref_no"/>
					<field name="partner_id" />
					<field name="style_id" />
					<field name="season_id" />
					<field name="year_id" />
					<field name="currency_id" />
					<field name="department_id" />
					<field name="state" />
				</tree>
			</field>
		</record>


        <record id="buyer_work_order_kanban" model="ir.ui.view">
			<field name="name">sale.order.kanban</field>
			<field name="model">sale.order</field>
			<field name="arch" type="xml">
                <kanban class="oe_background_grey o_kanban_dashboard o_stock_kanban" create="0">
                    <field name="name" />
                    <field name="partner_id" />
                    <field name="style_id" />
                    <field name="department_id" />
                    <field name="production_qty" />
                    <field name="production_ratio" />

                    <field name="color" />
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="#{kanban_color(record.color.raw_value)}">
                                <div class="o_kanban_card_header">
                                    <div class="o_kanban_card_header_title">
                                        <div class="o_primary"><field name="name"/></div>
                                    </div>
                                    <div class="o_kanban_manage_button_section">
                                        <a class="o_kanban_manage_toggle_button" href="#">More <i class="fa fa-caret-down"/></a>
                                    </div>
                                </div>
                                <div class="container o_kanban_card_content o_visible">
                                    <div class="row">
                                        <div class="col-xs-6 o_kanban_primary_left">
                                            <button class="btn btn-primary">
                                                <span><t t-esc="record.delay.value"/> To Receive</span>
                                            </button>
                                        </div>
                                        <div class="col-xs-6 o_kanban_primary_right">
                                            <!--<div t-if="record.production_ratio.raw_value &gt; 0" class="row"></div>

                                            <div t-if="record.count_picking_waiting.raw_value &gt; 0" class="row">
                                                <div class="col-xs-9">
                                                    <a name="get_action_picking_tree_waiting" type="object">
                                                        Waiting
                                                    </a>
                                                </div>
                                                <div class="col-xs-3">
                                                    <field name="production_ratio"/>
                                                </div>
                                            </div>-->

                                            <div t-if="record.delay.raw_value &gt; 0" class="row">
                                                <div class="col-xs-9">
                                                    <a class="oe_kanban_stock_picking_type_list" name="get_action_picking_tree_late" type="object">
                                                        Late
                                                    </a>
                                                </div>
                                                <div class="col-xs-3">
                                                    <field name="delay"/>
                                                </div>
                                            </div>

                                             <!--<div t-if="record.count_picking_backorders.raw_value &gt; 0" class="row">
                                                <div class="col-xs-9">
                                                    <a class="oe_kanban_stock_picking_type_list" name="get_action_picking_tree_backorder" type="object">
                                                        Back Orders
                                                    </a>
                                                </div>
                                                <div class="col-xs-3">
                                                    <field name="count_picking_backorders"/>
                                                </div>
                                            </div>-->
                                        </div>
                                    </div>
                                </div>
                                <div class="container o_kanban_card_manage_pane o_invisible">
                                    <div class="row">
                                        <!--<div class="col-xs-6 o_kanban_card_manage_section o_kanban_manage_view">
                                            <div class="o_kanban_card_manage_title">
                                                <span>View</span>
                                            </div>
                                            <div>
                                                <a name="get_stock_picking_action_picking_type" type="object">All</a>
                                            </div>
                                            <div>
                                                <a name="154" type="action">Ready</a>
                                            </div>
                                            <div>
                                                <a name="get_action_picking_tree_waiting" type="object">Waiting</a>
                                            </div>
                                        </div>-->
                                        <div class="col-xs-6 o_kanban_card_manage_section o_kanban_manage_new">
                                            <div class="o_kanban_card_manage_title">
                                                <span>New</span>
                                            </div>
                                            <div>
                                                <a name="160">Transfer</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </t>
                        </templates>
                </kanban>
            </field>
		</record>

		<!-- Product Style Search Views -->
		<record id="buyer_work_order_view_search" model="ir.ui.view">
			<field name="name">Buyer Work Order View</field>
			<field name="model">sale.order</field>
			<field eval="10" name="priority" />
			<field name="arch" type="xml">
				<search string="Buyer Work Order">
					<field name="name"
						filter_domain="['|', ('name', 'ilike', self), ('bwo_ref_no', 'ilike', self)]" />
					<group string="Group By">
						<filter name="name" string="Name" context="{'group_by': 'name'}" />
					</group>
					<group string="Group By">
						<filter name="bwo_ref_no" string="Reference No" context="{'group_by': 'bwo_ref_no'}" />
					</group>
				</search>
			</field>
		</record>


		<!-- Work Order  Menu and Action -->
		<record id="buyer_work_order_list_action" model="ir.actions.act_window">
			<field name="name">Work Order</field>
			<field name="res_model">sale.order</field>
			<field name="view_type">form</field>
			<field name="view_mode">kanban,tree,form</field>
		</record>

		<record id="action_buyer_work_order_kanban_view" model="ir.actions.act_window.view">
			<field eval="1" name="sequence" />
			<field name="view_mode">kanban</field>
			<field name="view_id" ref="buyer_work_order_kanban" />
			<field name="act_window_id" ref="buyer_work_order_list_action" />
		</record>

		<record id="action_buyer_work_order_tree_view" model="ir.actions.act_window.view">
			<field eval="2" name="sequence" />
			<field name="view_mode">tree</field>
			<field name="view_id" ref="buyer_work_order_tree_view" />
			<field name="act_window_id" ref="buyer_work_order_list_action" />
		</record>

		<record id="action_buyer_work_order_form_view" model="ir.actions.act_window.view">
			<field eval="3" name="sequence" />
			<field name="view_mode">form</field>
			<field name="view_id" ref="buyer_work_order_form_view" />
			<field name="act_window_id" ref="buyer_work_order_list_action" />
		</record>


		<menuitem id="buyer_work_order_main_menu" name="Work Order"
			parent="merchandising_menu" sequence="250" action="buyer_work_order_list_action" />
	</data>
</openerp>
