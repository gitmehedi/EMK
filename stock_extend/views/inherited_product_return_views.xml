<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>
		<record id="inherit_product_return_view_form" model="ir.ui.view">
			<field name="name">Product Return Form</field>
			<field name="model">stock.picking</field>
			<field name="arch" type="xml">
				<form string="Product Return Move">
					<header>
						<button name="%(product_return_wizard_action)d" string="Generate Lines" class="oe_highlight"
							states="draft" type="action"/>
						<button name="action_confirm" states="draft" string="Mark as Todo" type="object" class="oe_highlight"
							groups="base.group_user"/>
						<button name="action_assign" states="confirmed" string="Check Availability" type="object"
							class="oe_highlight" groups="base.group_user"/>
						<button name="rereserve_pick" states="waiting,partially_available" string="Recheck
							Availability" type="object" class="oe_highlight" groups="base.group_user"/>
						<button name="force_assign" states="confirmed,waiting,partially_available" string="Force
							Availability" type="object" groups="base.group_user"/>
						<button name="do_enter_transfer_details" states="assigned,partially_available" string="Transfer"
							groups="stock.group_stock_user" type="object" class="oe_highlight"/>
						<button name="do_print_picking" string="Print Picking List" groups="stock.group_stock_user"
							type="object" attrs="{'invisible': ['|', ('picking_type_code', '=', 'outgoing'),
							('state', '!=', 'assigned')]}"/>
						<button name="529" string="Reverse Transfer" states="done" type="action" groups="base.group_user"/>
						<button name="action_cancel" states="assigned,confirmed,partially_available,draft,waiting"
							string="Cancel Transfer" groups="base.group_user" type="object"/>
						<button name="do_unreserve" string="Unreserve" groups="base.group_user" type="object"
							attrs="{'invisible': [('quant_reserved_exist', '=', False)]}"/>
						<field name="state" widget="statusbar" statusbar_visible="draft,confirmed,partially_available,assigned,done"
							statusbar_colors="{&quot;shipping_except&quot;:&quot;red&quot;,&quot;invoice_except&quot;:&quot;red&quot;,&quot;waiting_date&quot;:&quot;blue&quot;}"/>
					</header>
					<sheet>
						<group>
							<!-- Take out for odoo9 -->
							<!-- <field name="invoice_state" string="Invoice Control" class="oe_inline"/> -->
							<field name="move_type" string="Delivery Method" invisible="1"/>
							<field name="return_type" string="Product Retrun" invisible="1"/>
							<field name="picking_type_id" string="Picking Type" domain="[('code', '=', 'outgoing')]" class="oe_inline"/>
							<field name="quant_reserved_exist" invisible="1"/>
							<field name="location_id" invisible="1"/>
							<field name="picking_type_code" invisible="1"/>
							<field name="location_dest_id" invisible="1"/>
						</group>
						<notebook position="inside">
							<page string="Products">
								<div>
									<div>
										<field name="move_lines" />
									</div>
								</div>
							</page>
							</notebook>
					</sheet>
				</form>
			</field>
		</record>
		
		<record id="inherit_product_return_action" model="ir.actions.act_window">
			<field name="name">Product Return</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">stock.picking</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{"default_return_type":True}</field>
			<field name="search_view_id" ref="stock.view_picking_internal_search"/>
			<field name="domain">[('return_type','=',True)]</field>
		</record>
		
		<record id="action_product_return_form_view2" model="ir.actions.act_window.view">
			<field eval="2" name="sequence"/>
			<field name="view_mode">form</field>
			<field name="view_id" ref="inherit_product_return_view_form"/>
			<field name="act_window_id" ref="inherit_product_return_action"/>
		</record>
		
		<record id="action_product_return_tree_view1" model="ir.actions.act_window.view">
			<field name="sequence" eval="1"/>
			<field name="view_mode">tree</field>
			<field name="view_id" ref="stock.vpicktree"/>
			<field name="act_window_id" ref="inherit_product_return_action"/>
		</record>
		
		<menuitem name="Product Return" id="inherited_product_return_menu" parent="stock.menu_stock_warehouse_mgmt"
			sequence="251" action="inherit_product_return_action"/>
	</data>
</openerp>
