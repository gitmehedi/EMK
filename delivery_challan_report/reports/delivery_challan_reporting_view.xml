<?xml version="1.0" encoding="utf-8"?>

<odoo>
    <data>
        <report
                id="action_top_sheet"
                string="Delivery Challan"
                model="stock.picking"
                report_type="qweb-pdf"
                file="delivery_challan_report.report_top_sheet"
                name="delivery_challan_report.report_top_sheet"
                paperformat="report_layout.custom_challan_paperformat"
                menu="False"

        />
        <template id="report_top_sheet">
            <t t-call="report.html_container">
                <div class="page" style="page-break-inside:auto;">
                    <div class="page-content">
                        <style type="text/css">
                            html, body, * {
                                margin: 0;
                                padding: 0;
                                box-sizing: border-box !important;
                            }
                            .br1 { border: 1px solid #333 !important;}
                            @page { margin: 0; }
                            .page {
                                font-size: 16px;
                                font-weight: normal;
                                font-family: Arial, Helvetica, sans-serif;
                                margin: 0 !important;
                                padding: 0 5px 0 3px !important;
                                display: block;
                                width: 100%;
                                position: relative;
                            }

                            .challan-header     { height: 230px; }
                            .vehicle-no         { padding-left: 130px; margin-top: 35px; height: 40px; }
                            .vehicle-no span    { display: block; width: 130px; line-height: 1.1em; }
                            .challan-no         { padding-left: 130px; margin-top: 12px; height: 28px; }
                            .do-date            { padding-right: 10px; margin-top: 12px; height: 28px; }
                            .partner-name       { padding-left: 130px; margin-top: 11px; height: 40px; }
                            .shipping-address   { padding-left: 130px; margin-top: 7px; height: 40px; }
                            .partner-name span,
                            .shipping-address span { line-height: 1.1em; }

                            .challan-table      { margin: 40px 0 0 15px; max-width: 100%; }
                            .challan-table,
                            .challan-table tbody { height: 285px; min-height: 285px; }
                            .challan-table th,
                            .challan-table td   { border: 0 none !important; }
                            .challan-footer     { margin-left: 0px; }

                            .lbl-total { height:40px; }
                            .qty-in-kg { width: 150px; float: right; line-height: 1em; height:40px; }
                            .amount-in-word { padding: 7px 0 0 156px; height:40px; }
                            .note { padding: 6px 0 0 75px; height:40px; }
                            .vat-challan-id { padding: 5px 0 0 130px; height:40px; }
                            .challan-date { padding: 5px 0 0 25px; height:40px; }
                        </style>

                        <div class="challan-header">
                            <div class="clearfix">
                                <div class="col-xs-12 text-left vehicle-no">
                                    <span t-esc="data['vehicle_no']"/>
                                </div>
                            </div>
                            <div class="clearfix">
                                <div class="col-xs-9 challan-no">
                                    <span t-esc="data['challan_no']"/>
                                </div>
                                <div class="col-xs-3 text-center do-date">
                                    <span t-esc="data['do_date']"
                                          t-options='{"widget": "date", "format": "dd/MM/yyyy"}'/>
                                </div>
                            </div>
                            <div class="clearfix">
                                <div class="col-xs-12 text-left partner-name">
                                    <span t-esc="data['partner_name']"/>
                                </div>
                            </div>
                            <div class="clearfix">
                                <div class="col-xs-12 text-left shipping-address">
                                    <span t-esc="data['shipping_address']"/>
                                </div>
                            </div>
                        </div>

                        <table class="table table-report-md challan-table">
                            <tbody>
                                <t t-foreach="lists" t-as="l">
                                    <tr>
                                        <td style="width: 130px; line-height: 1em;">
                                            <span t-esc="data['so_name']"/>
                                        </td>
                                        <td class="align-middle" style="white-space: no-wrap; line-height: 1em;">
                                            <span t-esc="data['so_date']"
                                                  t-options='{"widget": "date", "format": "dd/MM/yyyy"}'/>
                                        </td>
                                        <td class="align-middle" style="width: 335px; line-height: 1em;">
                                            <span t-esc="l['product_name']"/>
                                        </td>
                                        <td class="align-middle" style="width: 120px;">
                                            <span t-esc="l['qty']"/>
                                            <span t-esc="l['uom_name']"/>
                                        </td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>

                        <div class="clearfix challan-footer">
                            <div class="clearfix">
                                <div class="col-xs-6">
                                    <div class="lbl-total">
                                        <span style="padding-left:10px">Total:</span>
                                    </div>
                                </div>
                                <div class="col-xs-6 text-right">
                                    <div class="qty-in-kg">
                                        <span t-esc="sum(l['qty'] for l in lists)"/>
                                        <span t-esc="lists[0]['uom_name']"/>
                                        <t t-if="lists[0]['uom_name'] == 'MT'">
                                            /
                                            <span t-esc="sum(l['qty_in_kg'] for l in lists)"/>
                                            <span>kg</span>
                                        </t>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix">
                                <div class="col-xs-12">
                                    <div class="amount-in-word">
                                        <span t-esc="amount_to_word(sum(l['qty_in_kg'] for l in lists))"/>  KG:S
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix">
                                <div class="col-xs-12">
                                    <div class="note">
                                        <span t-esc="data['note']"/>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix">
                                <div class="col-xs-7">
                                    <div class="vat-challan-id">
                                        <span t-esc="data['vat_challan_id']"/>
                                    </div>
                                </div>
                                <div class="col-xs-5" >
                                    <div class="challan-date">
                                        <span t-esc="data['do_date']"
                                              t-options='{"widget": "date", "format": "dd/MM/yyyy"}'/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </template>
    </data>
</odoo>